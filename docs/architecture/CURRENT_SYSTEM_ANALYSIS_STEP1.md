# –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å–∏—Å—Ç–µ–º—ã –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π (–®–∞–≥ 1)

## 1. –û–±–∑–æ—Ä —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã codebase estimate-service

### 1.1 –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **–ú–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π** –Ω–∞ –±–∞–∑–µ Nx 21.2.0
- **Frontend**: React 19.1.0 —Å TypeScript, Vite, Tailwind CSS
- **Backend**: NestJS —Å TypeScript, Prisma ORM
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL 15+
- **–ö—ç—à**: Redis 7+
- **AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: DeepSeek R1, Hugging Face, Model Context Protocol (MCP)

### 1.2 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
estimate-service/
‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îî‚îÄ‚îÄ estimate-frontend/       # React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ estimate-service/        # –û—Å–Ω–æ–≤–Ω–æ–π backend —Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îú‚îÄ‚îÄ data-collector/          # –°–µ—Ä–≤–∏—Å —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –§–°–ë–¶-2022
‚îÇ   ‚îú‚îÄ‚îÄ ai-assistant/            # AI —Å–µ—Ä–≤–∏—Å (—á–∞—Å—Ç–∏—á–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω)
‚îÇ   ‚îî‚îÄ‚îÄ knowledge-base/          # –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π
‚îú‚îÄ‚îÄ libs/
‚îÇ   ‚îî‚îÄ‚îÄ shared-contracts/        # –û–±—â–∏–µ —Ç–∏–ø—ã –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
‚îú‚îÄ‚îÄ mcp-server/                  # MCP —Å–µ—Ä–≤–µ—Ä –¥–ª—è AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ prisma/                      # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å—Ö–µ–º–∞
‚îî‚îÄ‚îÄ docs/                        # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

### 1.3 –ö–ª—é—á–µ–≤—ã–µ –º–æ–¥—É–ª–∏ backend

#### –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å (estimate-service)
- **AI Assistant Module** - –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å
- **Estimate Module** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–º–µ—Ç–∞–º–∏
- **FGIS-CS API Module** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ–µ–¥–µ—Ä–∞–ª—å–Ω–æ–π –±–∞–∑–æ–π
- **Cache Module** - —É–ª—É—á—à–µ–Ω–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Priority Queue Module** - –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á
- **Validation Module** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

#### Data Collector Service
- **GESN Module** - —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –ì–≠–°–ù
- **FER Module** - —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –§–ï–†
- **TER Module** - —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –¢–ï–†
- **FSBC Module** - —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –§–°–ë–¶

## 2. –¢–æ—á–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –Ω–æ–≤—ã—Ö AI —Ñ—É–Ω–∫—Ü–∏–π

### 2.1 –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

#### AI Assistant Module (–≤ estimate-service)
```typescript
// –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ: services/estimate-service/src/modules/ai-assistant/
- AiAssistantService         # –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å AI
- TaskPlannerService         # –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á
- ResponseBuilderService     # –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤
- ModelManagerService        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª—è–º–∏
- DeepSeekAiProvider        # –ü—Ä–æ–≤–∞–π–¥–µ—Ä DeepSeek R1
- YandexAiProvider          # –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä
```

#### MCP Server
```typescript
// –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ: mcp-server/src/services/
- DeepSeekService           # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å DeepSeek API
- HuggingfaceService        # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Hugging Face
- EstimateAIService         # AI –¥–ª—è —Å–º–µ—Ç
```

### 2.2 –ù–æ–≤—ã–µ —Ç–æ—á–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

#### 2.2.1 –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ AI Assistant –¥–ª—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–º–µ—Ç
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å–º–µ—Ç** - –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∏ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞
- **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–¥–æ–≤ –§–°–ë–¶
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏** - —Å–Ω–∏–∂–µ–Ω–∏–µ –∑–∞—Ç—Ä–∞—Ç
- **–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∏—Å–∫–æ–≤** - –∞–Ω–∞–ª–∏–∑ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

#### 2.2.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º–∏ –±–∞–∑–∞–º–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ —Ä–∞—Å—Ü–µ–Ω–æ–∫** - –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é —Ä–∞–±–æ—Ç
- **–í–∞–ª–∏–¥–∞—Ü–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –Ω–æ—Ä–º–∞–º** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
- **–†–µ–≥–∏–æ–Ω–∞–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è** - —É—á–µ—Ç –º–µ—Å—Ç–Ω—ã—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π

#### 2.2.3 –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **–ê–Ω–∞–ª–∏–∑ —á–µ—Ä—Ç–µ–∂–µ–π –∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π** - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–º–µ—Ç
- **–ò–º–ø–æ—Ä—Ç –∏–∑ –ì—Ä–∞–Ω–¥ –°–º–µ—Ç–∞** - –ø–∞—Ä—Å–∏–Ω–≥ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–º–µ—Ç
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤** - —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

## 3. –¢—Ä–µ–±—É–µ–º—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### 3.1 –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### PostgreSQL (–æ—Å–Ω–æ–≤–Ω–∞—è –ë–î)
```prisma
// –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
model FSBTSItem {
  id           String
  code         String    // –ö–æ–¥ –§–°–ë–¶
  name         String    // –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã
  unit         String    // –ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è
  basePrice    Decimal   // –ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞
  laborCost    Decimal   // –°—Ç–æ–∏–º–æ—Å—Ç—å —Ç—Ä—É–¥–∞
  machineCost  Decimal   // –°—Ç–æ–∏–º–æ—Å—Ç—å –º–∞—à–∏–Ω
  materialCost Decimal   // –°—Ç–æ–∏–º–æ—Å—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
  category     String    // –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ä–∞–±–æ—Ç
  regionCode   String    // –ö–æ–¥ —Ä–µ–≥–∏–æ–Ω–∞
}

model RegionalCoefficient {
  id            String
  regionCode    String    // –ö–æ–¥ —Ä–µ–≥–∏–æ–Ω–∞
  materialCoeff Decimal   // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –¥–ª—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
  laborCoeff    Decimal   // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –¥–ª—è —Ç—Ä—É–¥–∞
  machineCoeff  Decimal   // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –¥–ª—è –º–∞—à–∏–Ω
}
```

#### Redis (–∫—ç—à)
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω –§–°–ë–¶
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤
- –°–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –û—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á

### 3.2 –ù–æ–≤—ã–µ —Ç—Ä–µ–±—É–µ–º—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö

#### 3.2.1 –ù–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
1. **–ì–≠–°–ù** (–ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç–Ω—ã–µ —Å–º–µ—Ç–Ω—ã–µ –Ω–æ—Ä–º—ã)
   - 47 –≥–ª–∞–≤ –ø–æ –≤–∏–¥–∞–º —Ä–∞–±–æ—Ç
   - –ù–æ—Ä–º—ã –∑–∞—Ç—Ä–∞—Ç —Ç—Ä—É–¥–∞, –º–∞—à–∏–Ω, –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
   
2. **–§–ï–†** (–§–µ–¥–µ—Ä–∞–ª—å–Ω—ã–µ –µ–¥–∏–Ω–∏—á–Ω—ã–µ —Ä–∞—Å—Ü–µ–Ω–∫–∏)
   - –ë–∞–∑–æ–≤—ã–µ —Ä–∞—Å—Ü–µ–Ω–∫–∏ –Ω–∞ —Ä–∞–±–æ—Ç—ã
   - –°—Ç–æ–∏–º–æ—Å—Ç—å —Ç—Ä—É–¥–∞, –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤, –º–∞—à–∏–Ω
   
3. **–¢–ï–†** (–¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∞–ª—å–Ω—ã–µ –µ–¥–∏–Ω–∏—á–Ω—ã–µ —Ä–∞—Å—Ü–µ–Ω–∫–∏)
   - –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–∞—Å—Ü–µ–Ω–∫–∏
   - –ú–µ—Å—Ç–Ω—ã–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã
   
4. **–¢–°–ù** (–¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∞–ª—å–Ω—ã–µ —Å–º–µ—Ç–Ω—ã–µ –Ω–æ—Ä–º–∞—Ç–∏–≤—ã)
   - –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–æ—Ä–º–∞—Ç–∏–≤—ã
   - –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ —É—Å–ª–æ–≤–∏—è —Ä–µ–≥–∏–æ–Ω–æ–≤
   
5. **–§–°–°–¶** (–§–µ–¥–µ—Ä–∞–ª—å–Ω—ã–π —Å–±–æ—Ä–Ω–∏–∫ —Å–º–µ—Ç–Ω—ã—Ö —Ü–µ–Ω)
   - –¶–µ–Ω—ã –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
   - –¶–µ–Ω—ã –Ω–∞ –ø–µ—Ä–µ–≤–æ–∑–∫–∏
   
6. **–¢–°–°–¶** (–¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∞–ª—å–Ω—ã–π —Å–±–æ—Ä–Ω–∏–∫ —Å–º–µ—Ç–Ω—ã—Ö —Ü–µ–Ω)
   - –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
   - –ú–µ—Å—Ç–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏

#### 3.2.2 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
```typescript
interface NormativeDatabase {
  type: 'GESN' | 'FER' | 'TER' | 'TSN' | 'FSSC' | 'TSSC';
  region?: string;
  version: string;
  lastUpdate: Date;
  dataSource: {
    url?: string;
    file?: string;
    api?: string;
  };
}
```

## 4. API endpoints –¥–ª—è –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö

### 4.1 –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ API endpoints

#### Estimate Service API
```typescript
// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–º–µ—Ç–∞–º–∏
GET    /api/estimates              // –°–ø–∏—Å–æ–∫ —Å–º–µ—Ç
POST   /api/estimates              // –°–æ–∑–¥–∞–Ω–∏–µ —Å–º–µ—Ç—ã
GET    /api/estimates/:id          // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–º–µ—Ç—ã
PUT    /api/estimates/:id          // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–º–µ—Ç—ã
DELETE /api/estimates/:id          // –£–¥–∞–ª–µ–Ω–∏–µ —Å–º–µ—Ç—ã

// AI Assistant
POST   /api/ai/tasks/plan          // –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á
POST   /api/ai/tasks/execute       // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
POST   /api/ai/tasks/batch-execute // –ü–∞–∫–µ—Ç–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
```

#### Data Collector API
```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
POST   /api/automation/collect     // –ó–∞–ø—É—Å–∫ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
GET    /api/automation/status      // –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
POST   /api/automation/schedule    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
GET    /api/automation/logs        // –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```

### 4.2 –ù–æ–≤—ã–µ —Ç—Ä–µ–±—É–µ–º—ã–µ API endpoints

#### 4.2.1 API –¥–ª—è –ì–≠–°–ù
```typescript
GET    /api/normatives/gesn/chapters           // –°–ø–∏—Å–æ–∫ –≥–ª–∞–≤ –ì–≠–°–ù
GET    /api/normatives/gesn/search             // –ü–æ–∏—Å–∫ –ø–æ –ì–≠–°–ù
GET    /api/normatives/gesn/code/:code         // –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ –∫–æ–¥—É
POST   /api/normatives/gesn/calculate          // –†–∞—Å—á–µ—Ç –ø–æ –Ω–æ—Ä–º–∞–º
```

#### 4.2.2 API –¥–ª—è –§–ï–†/–¢–ï–†
```typescript
GET    /api/normatives/fer/regions             // –°–ø–∏—Å–æ–∫ —Ä–µ–≥–∏–æ–Ω–æ–≤
GET    /api/normatives/fer/:region/search      // –ü–æ–∏—Å–∫ –§–ï–† –ø–æ —Ä–µ–≥–∏–æ–Ω—É
GET    /api/normatives/ter/:region/search      // –ü–æ–∏—Å–∫ –¢–ï–† –ø–æ —Ä–µ–≥–∏–æ–Ω—É
POST   /api/normatives/fer/apply-coefficients  // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤
```

#### 4.2.3 API –¥–ª—è –§–°–°–¶/–¢–°–°–¶
```typescript
GET    /api/normatives/fssc/materials          // –ö–∞—Ç–∞–ª–æ–≥ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
GET    /api/normatives/fssc/search             // –ü–æ–∏—Å–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
GET    /api/normatives/tssc/:region/materials  // –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã
POST   /api/normatives/fssc/calculate-transport // –†–∞—Å—á–µ—Ç –¥–æ—Å—Ç–∞–≤–∫–∏
```

#### 4.2.4 –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π API
```typescript
POST   /api/normatives/smart-search    // –£–º–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –±–∞–∑–∞–º
POST   /api/normatives/validate        // –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –Ω–æ—Ä–º
POST   /api/normatives/optimize        // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤—ã–±–æ—Ä–∞ —Ä–∞—Å—Ü–µ–Ω–æ–∫
GET    /api/normatives/updates         // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö –±–∞–∑
```

## 5. –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ DeepSeek R1

### 5.1 –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

#### DeepSeek AI Provider
```typescript
// –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ: services/estimate-service/src/modules/ai-assistant/providers/deepseek-ai.provider.ts

class DeepSeekAiProvider implements AiProvider {
  // –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã
  async initialize(config: AiProviderConfig): Promise<void>
  async generateResponse(request: AiRequest): Promise<AiResponse>
  async isAvailable(): Promise<boolean>
  async getUsageStats(): Promise<UsageStats>
  
  // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
  - API endpoint: https://api.deepseek.com
  - –ú–æ–¥–µ–ª—å: deepseek-reasoner
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
  - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ (ConfidenceLevel)
}
```

#### MCP Server DeepSeek Service
```typescript
// –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ: mcp-server/src/services/deepseek.service.ts

class DeepSeekService {
  // –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã
  async analyzeCode(code: string, context: string): Promise<string>
  async generateDocumentation(code: string, type: string): Promise<string>
  async generateTests(code: string, framework: string): Promise<string>
  async refactorCode(code: string, goals: string[]): Promise<string>
  async architectureAdvice(description: string): Promise<string>
  
  // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ mock-—Ä–µ–∂–∏–º–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  // Health check –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
}
```

### 5.2 –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

#### 5.2.1 –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–º–µ—Ç
```typescript
interface ConstructionEstimateAI {
  // –ê–Ω–∞–ª–∏–∑ –æ–ø–∏—Å–∞–Ω–∏—è —Ä–∞–±–æ—Ç
  analyzeWorkDescription(description: string): Promise<{
    suggestedCodes: string[];
    category: string;
    confidence: number;
  }>;
  
  // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–º–µ—Ç—ã
  optimizeEstimate(estimate: Estimate): Promise<{
    suggestions: OptimizationSuggestion[];
    potentialSavings: number;
  }>;
  
  // –†–∏—Å–∫-–∞–Ω–∞–ª–∏–∑
  analyzeRisks(estimate: Estimate): Promise<{
    risks: Risk[];
    mitigation: MitigationStrategy[];
  }>;
}
```

#### 5.2.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–∑–∞–º–∏ –∑–Ω–∞–Ω–∏–π
- –û–±—É—á–µ–Ω–∏–µ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Å–º–µ—Ç–∞—Ö
- –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω–æ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∏
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫ —Ç–∏–ø–∞–º –æ–±—ä–µ–∫—Ç–æ–≤ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞

#### 5.2.3 –ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –ê–Ω–∞–ª–∏–∑ —á–µ—Ä—Ç–µ–∂–µ–π –∏ —Å—Ö–µ–º
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –æ–±—ä–µ–∫—Ç–æ–≤
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ PDF –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### 5.3 –¢–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ø—É—Ç–∏ —Ä–µ—à–µ–Ω–∏—è

#### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
1. **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –æ–∫–Ω–æ** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ —Ä–∞–∑–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞
2. **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** - –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –∞–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ–π –æ—Ç—Ä–∞—Å–ª–∏
3. **–°–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞** - –∑–∞–¥–µ—Ä–∂–∫–∏ –ø—Ä–∏ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö

#### –†–µ—à–µ–Ω–∏—è
1. **–°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–∞–∑–±–∏–µ–Ω–∏—è** - –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –±–æ–ª—å—à–∏—Ö —Å–º–µ—Ç –Ω–∞ —á–∞—Å—Ç–∏
2. **Fine-tuning** - –¥–æ–æ–±—É—á–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
4. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## 6. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–∞–ª—å–Ω–µ–π—à–µ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 6.1 –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ AI Assistant Module**
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º–∏ –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
   - –£–ª—É—á—à–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è

2. **–°–æ–∑–¥–∞–Ω–∏–µ Knowledge Base**
   - –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
   - –í–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
   - –û–±—É—á–µ–Ω–∏–µ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

3. **API Gateway –¥–ª—è –Ω–æ—Ä–º–∞—Ç–∏–≤–æ–≤**
   - –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –±–∞–∑–∞–º
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
   - –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### 6.2 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
   - –í—ã–¥–µ–ª–µ–Ω–∏–µ AI Assistant –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å
   - –°–æ–∑–¥–∞–Ω–∏–µ Normatives Service
   - Event-driven –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è

2. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**
   - Horizontal scaling –¥–ª—è AI —Å–µ—Ä–≤–∏—Å–æ–≤
   - Load balancing –¥–ª—è API
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞**
   - –ú–µ—Ç—Ä–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è AI
   - –ê–Ω–∞–ª–∏–∑ —Ç–æ—á–Ω–æ—Å—Ç–∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## 7. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ estimate-service –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ö–æ—Ä–æ—à—É—é –æ—Å–Ω–æ–≤—É –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –¥–ª—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–º–µ—Ç. –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:

- ‚úÖ –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å DeepSeek R1
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å AI Assistant Module
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- ‚úÖ API endpoints –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞:
- üîÑ –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è AI –¥–ª—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ–π –æ—Ç—Ä–∞—Å–ª–∏
- üîÑ –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö –±–∞–∑ (–ì–≠–°–ù, –§–ï–†, –¢–ï–†, –¢–°–ù, –§–°–°–¶, –¢–°–°–¶)
- üîÑ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ—Ä–º–∞—Ç–∏–≤–∞–º–∏
- üîÑ –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
- üîÑ –£–ª—É—á—à–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ–π —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏

–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Å–º–µ—Ç–∞–º–∏ –∏ –≥–ª—É–±–æ–∫—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º–∏ –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö.
