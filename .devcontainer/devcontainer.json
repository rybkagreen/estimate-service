{
  "name": "Estimate Service Dev Container",
  "dockerComposeFile": "../docker-compose.yml",
  "service": "estimate-service",
  "workspaceFolder": "/workspace",
  "shutdownAction": "stopCompose",
  "customizations": {
    "vscode": {
      "extensions": [
        "dbaeumer.vscode-eslint",
        "esbenp.prettier-vscode",
        "prisma.prisma",
        "bradlc.vscode-tailwindcss",
        "streetsidesoftware.code-spell-checker",
        "eamodio.gitlens",
        "ms-azuretools.vscode-docker",
        "firsttris.vscode-jest-runner",
        "graphql.vscode-graphql",
        "nx-console.vscode-nx-console",
        "GitHub.copilot",
        "GitHub.copilot-chat",
        "ms-python.python",
        "ms-toolsai.jupyter",
        "rangav.vscode-thunder-client",
        "usernamehw.errorlens",
        "cweijan.vscode-postgresql",
        "christian-kohler.npm-intellisense"
      ],
      "settings": {
        "editor.defaultFormatter": "esbenp.prettier-vscode",
        "editor.formatOnSave": true,
        "editor.codeActionsOnSave": {
          "source.fixAll.eslint": "always"
        },
        "typescript.tsdk": "node_modules/typescript/lib",
        "jest.autoEnable": true,
        "tailwindCSS.includeLanguages": {
          "typescript": "typescriptreact"
        },
        "files.exclude": {
          "**/.git": true,
          "**/.svn": true,
          "**/.hg": true,
          "**/CVS": true,
          "**/.DS_Store": true,
          "**/node_modules": true
        }
      }
    }
  },
  "forwardPorts": [
    3000,  // estimate-frontend
    3022,  // estimate-service
    3001,  // data-collector
    3002,  // ai-assistant
    3003,  // knowledge-base
    8000,  // python-app
    5432,  // PostgreSQL
    5555,  // Prisma Studio
    6379,  // Redis
    9229   // Debugger
  ],
  "postCreateCommand": "npm install --workspaces && pip install --upgrade pip && bash .github/setup-codespaces.sh && bash .github/init-copilot-workspace.sh",
  "remoteUser": "node",
  "features": {
    // "ghcr.io/devcontainers/features/zsh:1": {
    //   "ohMyZsh": true,
    //   "ohMyZshPlugins": "git,node,npm,command-not-found,docker,history,extract,web-search,fd,zsh-autosuggestions,zsh-syntax-highlighting",
    //   "ohMyZshTheme": "agnoster",
    //   "customZshrc": "# User custom zshrc\nexport ZSH=\"$HOME/.oh-my-zsh\"\nZSH_THEME=\"agnoster\"\nplugins=(git node npm command-not-found docker history extract web-search fd zsh-autosuggestions zsh-syntax-highlighting)\nsource $ZSH/oh-my-zsh.sh\n# Aliases\nalias ll='ls -lah'\nalias gs='git status'\nalias gp='git pull'\nalias gc='git commit'\n# Enable autosuggestions\nsource /usr/share/zsh-autosuggestions/zsh-autosuggestions.zsh 2>/dev/null || true\n# Enable syntax highlighting\nsource /usr/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh 2>/dev/null || true\n# Prompt config\nexport PROMPT='%F{cyan}%n@%m%f %F{yellow}%~%f $(git_prompt_info) %F{green}$%f '",
    // },
    "ghcr.io/devcontainers/features/python:1": {
      "version": "3.11",
      "installMiniconda": true,
      "condaChannels": "conda-forge"
    }
  }
}
