name: ðŸ¤– AI Code Review and Quality Check

on:
  pull_request:
    types: [opened, synchronize, reopened]
  workflow_dispatch:

env:
  NODE_VERSION: '20'

jobs:
  ai-code-analysis:
    name: ðŸ§  AI-Powered Code Analysis
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pull-requests: write
      checks: write

    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ env.NODE_VERSION }}
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Generate AI context
        run: |
          echo "# AI Code Review Context" > ai-context.md
          echo "## Project: Estimate Service" >> ai-context.md
          echo "## Domain: Construction Cost Estimation" >> ai-context.md
          echo "## Tech Stack: NestJS + TypeScript + Prisma + React" >> ai-context.md
          echo "## Standards: Ð¤Ð¡Ð‘Ð¦-2022, Clean Architecture, DDD" >> ai-context.md
          echo "" >> ai-context.md
          echo "## Changed Files:" >> ai-context.md
          git diff --name-only HEAD~1 HEAD >> ai-context.md

      - name: TypeScript quality check
        run: |
          echo "ðŸŽ¯ ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° TypeScript ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð°..."
          npx tsc --noEmit --skipLibCheck
          echo "âœ… TypeScript Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð°"

      - name: ESLint with AI-friendly output
        run: |
          echo "ðŸ” ESLint Ð°Ð½Ð°Ð»Ð¸Ð· Ð´Ð»Ñ AI review..."
          npm run lint:all -- --format=json --output-file=eslint-results.json || true

      - name: Complexity analysis
        run: |
          echo "ðŸ“Š ÐÐ½Ð°Ð»Ð¸Ð· ÑÐ»Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸ ÐºÐ¾Ð´Ð°..."
          npx ts-complex --output complex-report.json src/ services/ apps/ || true

      - name: Security audit
        run: |
          echo "ðŸ” ÐÑƒÐ´Ð¸Ñ‚ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸..."
          npm audit --json > security-audit.json || true

      - name: Test coverage analysis
        run: |
          echo "ðŸ§ª ÐÐ½Ð°Ð»Ð¸Ð· Ð¿Ð¾ÐºÑ€Ñ‹Ñ‚Ð¸Ñ Ñ‚ÐµÑÑ‚Ð°Ð¼Ð¸..."
          npm run test:coverage -- --json --outputFile=coverage-report.json || true

      - name: Generate AI review prompt
        run: |
          cat > ai-review-prompt.md << 'EOF'
          # ÐšÐ¾Ð½Ñ‚ÐµÐºÑÑ‚ Ð´Ð»Ñ AI Code Review

          ## ÐŸÑ€Ð¾ÐµÐºÑ‚: Estimate Service
          Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð°Ñ†Ð¸Ð¸ ÑÐ¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð¸Ñ ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… ÑÐ¼ÐµÑ‚ Ñ Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸ÐµÐ¹ Ð¤Ð¡Ð‘Ð¦-2022

          ## Ð¢ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ð¸
          - Backend: NestJS + TypeScript + Prisma ORM + PostgreSQL
          - Frontend: React + TypeScript + Vite + Tailwind CSS
          - AI: DeepSeek R1 + Hugging Face + MCP
          - Infrastructure: Docker + GitHub Actions + Codespaces

          ## ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð½Ñ‹Ðµ Ð¿Ñ€Ð¸Ð½Ñ†Ð¸Ð¿Ñ‹
          - Domain-Driven Design (DDD)
          - Clean Architecture
          - CQRS pattern
          - Event Sourcing Ð´Ð»Ñ Ð°ÑƒÐ´Ð¸Ñ‚Ð°

          ## Ð¡Ð¿ÐµÑ†Ð¸Ñ„Ð¸Ñ‡Ð½Ð°Ñ Ñ‚ÐµÑ€Ð¼Ð¸Ð½Ð¾Ð»Ð¾Ð³Ð¸Ñ
          - Ð¡Ð¼ÐµÑ‚Ð° = construction estimate
          - Ð Ð°ÑÑ†ÐµÐ½ÐºÐ° = rate/price item
          - Ð¤Ð¡Ð‘Ð¦ = federal construction pricing database
          - ÐÐ°ÐºÐ»Ð°Ð´Ð½Ñ‹Ðµ Ñ€Ð°ÑÑ…Ð¾Ð´Ñ‹ = overhead costs
          - Ð¡Ð¼ÐµÑ‚Ð½Ð°Ñ Ð¿Ñ€Ð¸Ð±Ñ‹Ð»ÑŒ = estimated profit

          ## Ð¡Ñ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ñ‹ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð°
          - TypeScript strict mode Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÐµÐ½
          - ÐŸÐ¾ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ñ‚ÐµÑÑ‚Ð°Ð¼Ð¸ Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼ 80%
          - ESLint + Prettier Ð±ÐµÐ· Ð¾ÑˆÐ¸Ð±Ð¾Ðº
          - JSDoc Ð´Ð»Ñ Ð²ÑÐµÑ… public Ð¼ÐµÑ‚Ð¾Ð´Ð¾Ð²
          - Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ñ‡ÐµÑ€ÐµÐ· class-validator

          ## Ð§Ñ‚Ð¾ Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ
          1. Ð¡Ð¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ðµ Ð´Ð¾Ð¼ÐµÐ½Ð½Ð¾Ð¹ Ð¼Ð¾Ð´ÐµÐ»Ð¸ ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ð¹ ÑÐ¼ÐµÑ‚Ñ‹
          2. ÐšÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾ÑÑ‚ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ Ð´ÐµÐ½ÐµÐ¶Ð½Ñ‹Ð¼Ð¸ Ñ€Ð°ÑÑ‡ÐµÑ‚Ð°Ð¼Ð¸ (decimal.js)
          3. Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… ÑÐ¾Ð³Ð»Ð°ÑÐ½Ð¾ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð°Ð¼ Ð¤Ð¡Ð‘Ð¦
          4. Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ ÐºÐ¾Ð½Ñ„Ð¸Ð´ÐµÐ½Ñ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…
          5. ÐŸÑ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ð¿Ñ€Ð¸ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ Ñ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ð¼Ð¸ ÑÐ¼ÐµÑ‚Ð°Ð¼Ð¸
          6. Ð¡Ð¾Ð±Ð»ÑŽÐ´ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸Ð½Ñ†Ð¸Ð¿Ð¾Ð² Clean Architecture
          7. ÐšÐ°Ñ‡ÐµÑÑ‚Ð²Ð¾ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð±Ð¸Ð·Ð½ÐµÑ-Ð»Ð¾Ð³Ð¸ÐºÐ¸

          ## Ð¢Ð¸Ð¿Ð¸Ñ‡Ð½Ñ‹Ðµ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ Ð² Ð´Ð¾Ð¼ÐµÐ½Ðµ
          - ÐÐµÑ‚Ð¾Ñ‡Ð½Ð¾ÑÑ‚Ð¸ Ð² Ð´ÐµÐ½ÐµÐ¶Ð½Ñ‹Ñ… Ñ€Ð°ÑÑ‡ÐµÑ‚Ð°Ñ… (float Ð²Ð¼ÐµÑÑ‚Ð¾ decimal)
          - ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ Ñ€ÐµÐ³Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ñ… ÐºÐ¾ÑÑ„Ñ„Ð¸Ñ†Ð¸ÐµÐ½Ñ‚Ð¾Ð²
          - ÐžÑ‚ÑÑƒÑ‚ÑÑ‚Ð²Ð¸Ðµ Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ð¸ ÐºÐ¾Ð´Ð¾Ð² Ñ€Ð°ÑÑ†ÐµÐ½Ð¾Ðº Ð¤Ð¡Ð‘Ð¦
          - ÐÐµÐ±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾Ðµ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ñ‡ÑƒÐ²ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ… ÑÐ¼ÐµÑ‚
          - ÐÐµÐ¾Ð¿Ñ‚Ð¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ðº Ð‘Ð” Ð´Ð»Ñ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ñ… ÑÐ¼ÐµÑ‚
          EOF

      - name: Upload artifacts for AI review
        uses: actions/upload-artifact@v4
        with:
          name: ai-review-data
          path: |
            ai-context.md
            ai-review-prompt.md
            eslint-results.json
            complex-report.json
            security-audit.json
            coverage-report.json

      - name: Comment PR with AI context
        if: github.event_name == 'pull_request'
        uses: actions/github-script@v7
        with:
          script: |
            const fs = require('fs');

            let context = '## ðŸ¤– AI Code Review Context\n\n';

            try {
              if (fs.existsSync('eslint-results.json')) {
                const eslint = JSON.parse(fs.readFileSync('eslint-results.json', 'utf8'));
                const errorCount = eslint.reduce((sum, file) => sum + file.errorCount, 0);
                const warningCount = eslint.reduce((sum, file) => sum + file.warningCount, 0);
                context += `**ESLint:** ${errorCount} Ð¾ÑˆÐ¸Ð±Ð¾Ðº, ${warningCount} Ð¿Ñ€ÐµÐ´ÑƒÐ¿Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ð¹\n`;
              }

              if (fs.existsSync('security-audit.json')) {
                const audit = JSON.parse(fs.readFileSync('security-audit.json', 'utf8'));
                if (audit.metadata) {
                  context += `**Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ:** ${audit.metadata.vulnerabilities.total} ÑƒÑÐ·Ð²Ð¸Ð¼Ð¾ÑÑ‚ÐµÐ¹\n`;
                }
              }

              context += '\nðŸ“‹ **Ð¡Ð¿ÐµÑ†Ð¸Ñ„Ð¸ÐºÐ° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ð´Ð»Ñ AI-Ñ€ÐµÐ²ÑŒÑŽ:**\n';
              context += '- ÐŸÑ€Ð¾ÐµÐºÑ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ ÑÐ¾ ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼Ð¸ ÑÐ¼ÐµÑ‚Ð°Ð¼Ð¸ Ð¸ Ð¤Ð¡Ð‘Ð¦-2022\n';
              context += '- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ NestJS + TypeScript + Prisma\n';
              context += '- ÐŸÑ€Ð¸Ð¼ÐµÐ½ÑÐµÑ‚ÑÑ Clean Architecture Ð¸ DDD\n';
              context += '- ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð²Ð°Ð¶Ð½Ð° Ñ‚Ð¾Ñ‡Ð½Ð¾ÑÑ‚ÑŒ Ð´ÐµÐ½ÐµÐ¶Ð½Ñ‹Ñ… Ñ€Ð°ÑÑ‡ÐµÑ‚Ð¾Ð²\n';
              context += '- Ð¢Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ ÑÐ¾Ð±Ð»ÑŽÐ´ÐµÐ½Ð¸Ðµ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð¾Ð² Ñ†ÐµÐ½Ð¾Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ð½Ð¸Ñ\n\n';
              context += 'ðŸ” **Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸ Ð´Ð»Ñ AI-review:**\n';
              context += '- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾ÑÑ‚ÑŒ Ð´Ð¾Ð¼ÐµÐ½Ð½Ð¾Ð¹ Ð¼Ð¾Ð´ÐµÐ»Ð¸\n';
              context += '- Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ Ð² Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸ Ð´ÐµÐ½ÐµÐ¶Ð½Ñ‹Ñ… Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹\n';
              context += '- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸ÑŽ ÑÐ¾Ð³Ð»Ð°ÑÐ½Ð¾ Ð¤Ð¡Ð‘Ð¦ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð°Ð¼\n';
              context += '- ÐžÑ†ÐµÐ½Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ð´Ð»Ñ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ñ… ÑÐ¼ÐµÑ‚\n';

            } catch (error) {
              context += `ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð°Ð½Ð°Ð»Ð¸Ð·Ðµ: ${error.message}\n`;
            }

            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: context
            });

  copilot-suggestions:
    name: ðŸ§‘â€ðŸ’» Generate Copilot Improvement Suggestions
    runs-on: ubuntu-latest
    needs: ai-code-analysis
    if: github.event_name == 'pull_request'

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Download AI review data
        uses: actions/download-artifact@v4
        with:
          name: ai-review-data

      - name: Generate Copilot suggestions
        run: |
          cat > copilot-suggestions.md << 'EOF'
          # ðŸ¤– ÐŸÑ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ Ð¿Ð¾ ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð¸ÑŽ Ð¾Ñ‚ AI

          ## ÐšÐ¾Ð½Ñ‚ÐµÐºÑÑ‚
          Ð­Ñ‚Ð¾Ñ‚ ÐºÐ¾Ð´ Ð¾Ñ‚Ð½Ð¾ÑÐ¸Ñ‚ÑÑ Ðº ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼Ð¸ ÑÐ¼ÐµÑ‚Ð°Ð¼Ð¸.

          ## ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð¿Ñ€Ð¾Ð¹Ð´ÐµÐ½Ñ‹:
          - âœ… TypeScript ÐºÐ¾Ð¼Ð¿Ð¸Ð»ÑÑ†Ð¸Ñ
          - âœ… ESLint Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ°
          - âœ… Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ
          - âœ… ÐŸÐ¾ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ñ‚ÐµÑÑ‚Ð°Ð¼Ð¸

          ## Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸ Ð´Ð»Ñ Copilot:

          ### 1. Ð”Ð¾Ð¼ÐµÐ½Ð½Ð°Ñ Ð¼Ð¾Ð´ÐµÐ»ÑŒ
          ```typescript
          // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÑÑ‚Ð¸ Ð¿Ð°Ñ‚Ñ‚ÐµÑ€Ð½Ñ‹ Ð´Ð»Ñ ÑÐ¼ÐµÑ‚Ð½Ñ‹Ñ… Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹:

          @Entity('estimates')
          export class EstimateEntity {
            // Ð’ÑÐµÐ³Ð´Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ decimal Ð´Ð»Ñ Ð´ÐµÐ½ÐµÐ¶Ð½Ñ‹Ñ… ÑÑƒÐ¼Ð¼
            @Column('decimal', { precision: 15, scale: 2 })
            totalCost: number;

            // Ð ÐµÐ³Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ðµ ÐºÐ¾ÑÑ„Ñ„Ð¸Ñ†Ð¸ÐµÐ½Ñ‚Ñ‹ Ð¤Ð¡Ð‘Ð¦
            @Column('decimal', { precision: 5, scale: 3 })
            regionalCoefficient: number;
          }
          ```

          ### 2. Ð‘Ð¸Ð·Ð½ÐµÑ-Ð»Ð¾Ð³Ð¸ÐºÐ°
          ```typescript
          // Ð¡ÐµÑ€Ð²Ð¸Ñ Ñ€Ð°ÑÑ‡ÐµÑ‚Ð° Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ decimal.js
          import { Decimal } from 'decimal.js';

          @Injectable()
          export class EstimateCalculatorService {
            calculateWithCoefficient(baseRate: number, coefficient: number): number {
              return new Decimal(baseRate).mul(coefficient).toNumber();
            }
          }
          ```

          ### 3. Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð¤Ð¡Ð‘Ð¦
          ```typescript
          // Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ ÐºÐ¾Ð´Ð¾Ð² Ñ€Ð°ÑÑ†ÐµÐ½Ð¾Ðº
          @IsMatches(/^\d{2}-\d{2}-\d{3}-\d{2}$/, {
            message: 'ÐšÐ¾Ð´ Ñ€Ð°ÑÑ†ÐµÐ½ÐºÐ¸ Ð´Ð¾Ð»Ð¶ÐµÐ½ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²Ð¾Ð²Ð°Ñ‚ÑŒ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ñƒ Ð¤Ð¡Ð‘Ð¦-2022'
          })
          rateCode: string;
          ```

          ## Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÑÑ‚Ð¸ Ð¿Ñ€Ð¾Ð¼Ð¿Ñ‚Ñ‹ Ñ Copilot:

          1. **"Ð¡Ð¾Ð·Ð´Ð°Ð¹ CRUD Ð´Ð»Ñ ÑÐ¼ÐµÑ‚Ñ‹ Ñ Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸ÐµÐ¹ Ð¤Ð¡Ð‘Ð¦"**
          2. **"Ð”Ð¾Ð±Ð°Ð²ÑŒ ÑÐµÑ€Ð²Ð¸Ñ Ñ€Ð°ÑÑ‡ÐµÑ‚Ð° Ð½Ð°ÐºÐ»Ð°Ð´Ð½Ñ‹Ñ… Ñ€Ð°ÑÑ…Ð¾Ð´Ð¾Ð²"**
          3. **"Ð ÐµÐ°Ð»Ð¸Ð·ÑƒÐ¹ ÑÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð² Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ Ð“Ñ€Ð°Ð½Ð´ Ð¡Ð¼ÐµÑ‚Ð°"**
          4. **"Ð¡Ð¾Ð·Ð´Ð°Ð¹ Ñ‚ÐµÑÑ‚Ñ‹ Ð´Ð»Ñ ÐºÐ°Ð»ÑŒÐºÑƒÐ»ÑÑ‚Ð¾Ñ€Ð° ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚Ð¸"**

          EOF

      - name: Comment with Copilot suggestions
        uses: actions/github-script@v7
        with:
          script: |
            const fs = require('fs');
            const suggestions = fs.readFileSync('copilot-suggestions.md', 'utf8');

            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: suggestions
            });
